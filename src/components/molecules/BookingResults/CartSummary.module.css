/* Base Container */
.cartContainer {
  width: 100%;
  background-color: var(--color-white);
  border-radius: var(--radius-md);
  padding: var(--space-3);
  margin-bottom: var(--space-6);
  border: 1px solid var(--color-border);
  transition: all 0.3s ease;
  overflow: visible;
  position: relative;
}

/* Enhanced Mobile Header */
.mobileHeader {
  display: none;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-4) 0;
  border-bottom: 1px solid var(--color-gray-100);
  margin-bottom: var(--space-3);
  cursor: pointer;
  user-select: none;
  transition: background-color 0.2s ease;
  border-radius: var(--radius-base);
  margin: calc(var(--space-4) * -1) calc(var(--space-4) * -1) var(--space-4)
    calc(var(--space-4) * -1);
  padding: var(--space-4);
}

.mobileHeader:hover {
  background-color: var(--color-gray-50);
}

.mobileHeaderContent {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.headerWithBadge {
  display: flex;
  align-items: center;
  gap: var(--space-3);
}

.itemCountBadge {
  width: 40px;
  height: 40px;
  background: var(--color-primary);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-white);
  font-weight: 600;
  font-size: var(--font-size-sm);
  flex-shrink: 0;
}

.mobileTitle {
  font-family: var(--font-family-primary);
  font-weight: 600;
  font-size: var(--font-size-base);
  color: var(--color-text-primary);
}

.mobileSubtitle {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  margin-top: var(--space-1);
}

.collapseSection {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.collapseText {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  display: none;
}

.collapseButton {
  background: none;
  border: none;
  padding: var(--space-1);
  cursor: pointer;
  color: var(--color-text-secondary);
  transition: color 0.2s ease, transform 0.3s ease;
}

.collapseButton:hover {
  color: var(--color-primary);
}

/* Desktop Header */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-6);
  padding-bottom: var(--space-4);
  border-bottom: 1px solid var(--color-gray-100);
}

.title {
  font-family: var(--font-family-primary);
  font-weight: 600;
  font-size: var(--font-size-heading-4);
  color: var(--color-text-primary);
  margin: 0;
}

.addMoreButton {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--font-size-sm);
  padding: var(--space-2) var(--space-4);
  transition: all 0.2s ease;
  font-weight: 500;
}

.addMoreText {
  transition: opacity 0.2s ease;
}

.addMoreTextShort {
  display: none;
}

/* Cart Content */
.cartContent {
  transition: all 0.3s ease;
  overflow: visible;
}

.cartContent.collapsed {
  max-height: 0;
  opacity: 0;
  margin: 0;
  padding: 0;
}

/* Cart Items */
.cartItems {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  margin-bottom: var(--space-6);
}

.cartItem {
  position: relative;
  padding: var(--space-3);
  border: 1px solid var(--color-gray-200);
  border-radius: var(--radius-md);
  background-color: var(--color-white);
  transition: all 0.3s ease;
  overflow: visible;
}

.cartItem:hover {
  border-color: var(--color-gray-300);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.04);
}

.cartItem.editing {
  border-color: var(--color-primary);
  box-shadow: 0 4px 16px rgba(62, 140, 255, 0.15);
  position: relative;
}

/* Image with Badge */
.imageWithBadge {
  position: relative;
  display: inline-block;
}

.quantityBadge {
  position: absolute;
  top: -8px;
  right: -8px;
  width: 24px;
  height: 24px;
  background: var(--color-primary);
  color: var(--color-white);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--font-size-xs);
  font-weight: 600;
  border: 2px solid var(--color-white);
  z-index: 2;
}

/* Mobile Views */
.mobileCompactView {
  display: none;
}

.compactHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  user-select: none;
  padding: var(--space-2) 0;
}

.compactInfo {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  flex: 1;
  min-width: 0;
}

.compactImage {
  width: 48px;
  height: 48px;
  border-radius: var(--radius-md);
  object-fit: cover;
  flex-shrink: 0;
  overflow: hidden;
}

.compactDetails {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  min-width: 0;
  flex: 1;
}

.compactTitle {
  font-family: var(--font-family-primary);
  font-weight: 600;
  font-size: var(--font-size-sm);
  color: var(--color-text-primary);
  margin: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.compactMeta {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  flex-wrap: wrap;
}

.compactPricing {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
}

.guestCount {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
}

.compactPrice {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-lg);
  font-weight: 700;
  color: var(--color-secondary);
}

.expandButton {
  background: none;
  border: none;
  padding: var(--space-1);
  cursor: pointer;
  color: var(--color-text-secondary);
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.expandButton:hover {
  color: var(--color-primary);
}

.rotated {
  transform: rotate(180deg);
}

.expandedDetails {
  max-height: 0;
  overflow: hidden;
  transition: all 0.3s ease;
  opacity: 0;
}

.expandedDetails.expanded {
  max-height: 500px;
  opacity: 1;
  padding-top: var(--space-3);
}

.mobileDetails {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  margin-bottom: var(--space-3);
  padding: var(--space-3);
  background-color: var(--color-gray-50);
  border-radius: var(--radius-sm);
}

.detailRow {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  font-family: var(--font-family-primary);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
}

.optionBadge {
  display: inline-block;
  background-color: var(--color-primary-light);
  color: var(--color-primary);
  font-size: var(--font-size-xs);
  font-weight: 500;
  padding: var(--space-1) var(--space-3);
  border-radius: var(--radius-sm);
  width: fit-content;
}

.mobileActions {
  display: flex;
  gap: var(--space-2);
}

.mobileRemoveButton {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-1);
  font-size: var(--font-size-sm);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-sm);
  transition: all 0.2s ease;
  font-weight: 500;
  color: var(--color-alert-error);
  background-color: var(--color-white);
  border: 1px solid var(--color-alert-error);
}

.mobileRemoveButton:hover {
  background-color: var(--color-alert-error);
  color: var(--color-white);
}

/* Enhanced Desktop View - Single Row Grid */
.desktopView {
  display: block;
}

.cartItemGrid {
  display: grid;
  grid-template-columns: 80px 1fr 160px 160px 160px 1fr;
  gap: var(--space-2);
  align-items: center;
}

/* Grid Column Styles */
.gridImage {
  display: flex;
  justify-content: center;
}

.gridDetails {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  min-width: 0;
  padding-left: var(--space-3);
}

.gridDate,
.gridTime {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  border-radius: var(--radius-sm);
  border: 1px solid var(--color-border);
  padding: var(--space-4);
}

.gridPricing {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  padding: var(--space-4);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  max-height: 81px;
  /* text-align: right; */
}

.gridActions {
  display: flex;
  justify-content: flex-end;
}

/* Column Labels */
.columnLabel {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  letter-spacing: 0.5px;
}

/* Updated Image Styles */
.activityImage {
  width: 80px;
  height: 80px;
  border-radius: var(--radius-sm);
  object-fit: cover;
  transition: transform 0.3s ease;
}

.cartItem:hover .activityImage {
  transform: scale(1.05);
}

/* Title and Details */
.cartItemTitle {
  font-family: var(--font-family-primary);
  font-weight: 600;
  font-size: var(--font-size-base);
  color: var(--color-text-primary);
  margin: 0;
  line-height: 1.3;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.locationInfo {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
}

.locationInfo svg {
  color: var(--color-gray-400);
  flex-shrink: 0;
}

/* Pricing Section */
.mainPrice {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-xl);
  font-weight: 800;
  color: var(--color-secondary);
  margin: 0;
}

.quantityInfo {
  font-family: var(--font-family-primary);
  color: var(--color-text-secondary);
  display: flex;
  /* align-items: center; */
  /* justify-content: flex-end; */
  /* gap: var(--space-1); */
  /* padding: var(--space-2); */
  /* border-radius: var(--radius-sm); */
  transition: all 0.2s ease;
  /* border: 1px solid var(--color-gray-200); */
  cursor: pointer;
}

.gridPricing:hover {
  border-color: var(--color-primary);
}

/* Action Buttons */
.removeButton {
  display: flex;
  align-items: center;
  gap: var(--space-1);
  font-size: var(--font-size-sm);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-sm);
  transition: all 0.2s ease;
  font-weight: 500;
  border: 1px solid;
  color: var(--color-alert-error);
  background-color: var(--color-white);
  border-color: var(--color-alert-error);
}

.removeButton:hover {
  background-color: var(--color-alert-error);
  color: var(--color-white);
}

.buttonText {
  transition: opacity 0.2s ease;
}

/* Enhanced Summary */
.enhancedSummary {
  background: linear-gradient(
    135deg,
    var(--color-primary-light) 0%,
    var(--color-bg-secondary) 100%
  );
  border-radius: var(--radius-md);
  padding: var(--space-5);
  margin-bottom: var(--space-6);
  border: 1px solid var(--color-primary-light);
}

.summaryContent {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-4);
}

.totalSection {
  flex: 1;
}

.totalLabel {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  margin-bottom: var(--space-1);
}

.totalAmount {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-2xl);
  font-weight: 700;
  color: var(--color-text-primary);
  margin-bottom: var(--space-1);
}

.guestSummary {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
}

.trustSignals {
  text-align: right;
  flex-shrink: 0;
}

.trustItem {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-sm);
  font-weight: 500;
  color: var(--color-alert-success);
  margin-bottom: var(--space-1);
}

.trustSubtext {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
}

/* Enhanced Action Section */
.actionSection {
  display: flex;
  justify-content: flex-start;
}

.enhancedNextButton {
  width: 100%;
}

/* Updated Editable Field Styles */
.editableField {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  /* padding: var(--space-2); */
  /* border-radius: var(--radius-sm); */
  cursor: pointer;
  transition: all 0.2s ease;
  /* border: 1px solid var(--color-gray-200); */
  color: var(--color-text-primary);
}

.gridDate:hover,
.gridTime:hover {
  border-color: var(--color-primary);
}

.editableField .editIcon {
  opacity: 0;
  transition: opacity 0.2s ease;
  color: var(--color-text-tertiary);
}

.gridDate:hover .editIcon,
.gridTime:hover .editIcon,
.gridPricing:hover .editIcon {
  opacity: 1;
  color: var(--color-primary);
}

/* Guest count clickable styling */

/* .guestCountClickable:hover {
  border-color: var(--color-primary);
  background-color: var(--color-primary-light);
} */

/* Editing overlay */
.editingOverlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.65);
  backdrop-filter: blur(4px);
  border-radius: var(--radius-md);
  z-index: 10;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.3s ease;
}

/* Inline editing section improvements */
.inlineEditSection {
  background: var(--color-white);
  border-radius: var(--radius-md);
  padding: var(--space-4);
  border: 1px solid var(--color-primary);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  min-width: 300px;
  max-width: 90vw;
}

.editSectionTitle {
  font-family: var(--font-family-primary);
  font-size: var(--font-size-base);
  font-weight: 600;
  color: var(--color-text-primary);
  margin: 0 0 var(--space-3) 0;
  text-align: center;
}

/* Time slot grid - inverted to multiple rows, fewer columns */
.timeSlotGrid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: var(--space-2);
  margin-bottom: var(--space-4);
}

.timeSlotButton {
  padding: var(--space-3);
  border: 1px solid var(--color-border-secondary);
  border-radius: var(--radius-sm);
  background: var(--color-white);
  font-family: var(--font-family-primary);
  font-size: var(--font-size-sm);
  color: var(--color-text-primary);
  cursor: pointer;
  transition: all 0.2s ease;
  font-weight: 500;
}

.timeSlotButton:hover {
  border-color: var(--color-primary);
  background-color: var(--color-primary-light);
  color: var(--color-primary);
}

.timeSlotButton.selected {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-white);
}

/* Inline date select styling */
.inlineDateSelect {
  margin-bottom: var(--space-3);
  width: 100%;
}

.inlinePassengerCounter {
  background: transparent;
  border: none;
  padding: 0;
  margin-bottom: var(--space-3);
}

/* Inline edit actions */
.inlineEditActions {
  display: flex;
  gap: var(--space-2);
  justify-content: flex-end;
}

.saveEditButton,
.cancelEditButton {
  min-width: 80px;
  font-weight: 500;
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Responsive Design - Large Desktop (1200px+) */
@media (min-width: 1200px) {
  .cartItemGrid {
    grid-template-columns: 80px 1fr repeat(3, 1fr) 110px;
    gap: var(--space-2);
  }

  .quantityBadge {
    width: 26px;
    height: 26px;
    top: -10px;
    right: -10px;
  }
}

/* Responsive Design - Desktop (1024px - 1199px) */
@media (max-width: 1199px) and (min-width: 1024px) {
  .cartItemGrid {
    grid-template-columns: 70px 1fr repeat(3, 1fr) 40px;
    gap: var(--space-2);
  }

  .cartItemTitle {
    font-size: var(--font-size-sm);
  }

  .buttonText {
    display: none;
  }

  .removeButton {
    padding: var(--space-2);
    min-width: 40px;
    justify-content: center;
  }
}

/* Responsive Design - Tablet (768px - 1023px) */
@media (max-width: 1023px) and (min-width: 769px) {
  .cartItemGrid {
    grid-template-columns: 80px 1fr repeat(3, 1fr) 40px;
    gap: var(--space-2);
  }

  .editIcon {
    display: none;
  }

  .cartItemTitle {
    font-size: var(--font-size-sm);
  }

  /* .columnLabel {
    font-size: 10px;
  } */

  .mainPrice {
    font-size: var(--font-size-base);
  }

  .buttonText {
    display: none;
  }

  .removeButton {
    padding: var(--space-1);
    min-width: 36px;
    justify-content: center;
  }
}

/* Mobile Design - Switch to Stacked Layout */
@media (max-width: 768px) {
  .desktopView {
    display: none !important;
  }

  .mobileCompactView {
    display: block !important;
  }

  .mobileHeader {
    display: flex !important;
  }

  .header {
    display: none !important;
  }

  .cartContainer {
    padding: var(--space-3);
  }

  .cartItem {
    padding: var(--space-3);
  }

  .compactImage {
    width: 55px;
    height: 55px;
  }

  .compactTitle {
    font-size: var(--font-size-sm);
  }

  .enhancedNextButton {
    width: 100%;
    font-size: var(--font-size-base);
  }

  .addMoreTextShort {
    display: inline;
  }

  .addMoreText {
    display: none;
  }

  .addMoreButton {
    min-width: 44px;
    padding: var(--space-2);
    justify-content: center;
  }

  .collapseText {
    display: inline;
  }

  .itemCountBadge {
    width: 32px;
    height: 32px;
    font-size: var(--font-size-xs);
  }

  .quantityBadge {
    width: 20px;
    height: 20px;
    font-size: 10px;
    top: -6px;
    right: -6px;
  }

  .compactPrice {
    font-size: var(--font-size-lg);
    font-weight: 700;
  }

  .editingOverlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1000;
    border-radius: 0;
  }

  .inlineEditSection {
    margin: var(--space-4);
    max-width: calc(100vw - var(--space-8));
    min-width: auto;
  }

  .timeSlotGrid {
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-2);
  }

  .timeSlotButton {
    padding: var(--space-2);
    font-size: var(--font-size-xs);
  }
  .inlineEditActions {
    flex-direction: column;
    gap: var(--space-2);
  }

  .saveEditButton,
  .cancelEditButton {
    width: 100%;
    min-width: auto;
  }
}

/* Responsive Design - Mobile Medium (361px - 480px) */
@media (max-width: 480px) {
  .cartContainer {
    padding: var(--space-2);
    border-radius: var(--radius-sm);
  }

  .cartItem {
    padding: var(--space-2);
  }

  .mobileHeader {
    padding: var(--space-3);
  }

  .mobileTitle {
    font-size: var(--font-size-sm);
  }

  .mobileSubtitle {
    font-size: var(--font-size-xs);
  }

  .compactImage {
    width: 45px;
    height: 45px;
  }

  .compactTitle {
    font-size: var(--font-size-xs);
  }

  .compactMeta,
  .detailRow {
    font-size: var(--font-size-xs);
  }

  .mobileDetails {
    padding: var(--space-2);
  }

  .mobileRemoveButton {
    font-size: var(--font-size-xs);
    padding: var(--space-2);
  }

  .totalAmount {
    font-size: var(--font-size-xl);
  }

  .enhancedNextButton {
    font-size: var(--font-size-sm);
    padding: var(--space-3) var(--space-4);
  }

  .summaryContent {
    flex-direction: column;
    gap: var(--space-2);
  }

  .trustSignals {
    text-align: left;
  }

  .itemCountBadge {
    width: 28px;
    height: 28px;
    font-size: 10px;
  }

  .editingOverlay {
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: none;
  }

  .inlineEditSection {
    margin: var(--space-2);
    padding: var(--space-3);
    max-width: calc(100vw - var(--space-4));
  }

  .editSectionTitle {
    font-size: var(--font-size-sm);
    margin-bottom: var(--space-2);
  }

  .timeSlotGrid {
    grid-template-columns: 1fr;
    gap: var(--space-1);
  }

  .timeSlotButton {
    padding: var(--space-2) var(--space-3);
    font-size: var(--font-size-xs);
  }
}

/* Responsive Design - Mobile Small */
@media (max-width: 360px) {
  .cartContainer {
    padding: var(--space-1);
  }

  .cartItem {
    padding: var(--space-1);
  }

  .mobileHeader {
    padding: var(--space-2);
  }

  .headerWithBadge {
    gap: var(--space-2);
  }

  .mobileTitle {
    font-size: var(--font-size-xs);
    line-height: 1.2;
  }

  .compactInfo {
    gap: var(--space-2);
  }

  .compactImage {
    width: 35px;
    height: 35px;
  }

  .compactTitle {
    font-size: var(--font-size-xs);
    line-height: 1.2;
  }

  .mobileActions {
    flex-direction: column;
    gap: var(--space-1);
  }

  .mobileRemoveButton {
    padding: var(--space-1);
    font-size: var(--font-size-xs);
  }

  .enhancedSummary {
    padding: var(--space-3);
  }

  .totalAmount {
    font-size: var(--font-size-lg);
  }

  .enhancedNextButton {
    padding: var(--space-2) var(--space-3);
    font-size: var(--font-size-xs);
    gap: var(--space-1);
  }

  .itemCountBadge {
    width: 24px;
    height: 24px;
    font-size: 10px;
  }

  .quantityBadge {
    width: 16px;
    height: 16px;
    font-size: 8px;
    top: -4px;
    right: -4px;
  }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
  .cartItem {
    transform: none;
  }

  .cartItem:hover {
    transform: none;
  }

  .compactHeader,
  .mobileHeader,
  .expandButton,
  .collapseButton {
    padding: var(--space-2);
    min-height: 44px;
    display: flex;
    align-items: center;
  }

  .mobileRemoveButton,
  .enhancedNextButton {
    min-height: 44px;
    padding: var(--space-2) var(--space-3);
  }

  .addMoreButton {
    min-height: 44px;
    min-width: 44px;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .cartItem {
    border-width: 2px;
  }

  .cartItem.editing {
    border-width: 3px;
  }

  .mobileRemoveButton,
  .removeButton {
    border-width: 2px;
  }

  .enhancedSummary {
    border-width: 2px;
  }

  .inlineEditSection {
    border-width: 3px;
  }

  .timeSlotButton {
    border-width: 2px;
  }

  .timeSlotButton.selected {
    border-width: 3px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .cartItem,
  .expandedDetails,
  .cartContent,
  .activityImage,
  .enhancedNextButton,
  .collapseButton,
  .expandButton,
  .addMoreText,
  .buttonText,
  .rotated,
  .editingOverlay,
  .timeSlotButton,
  .editableField,
  .guestCountClickable {
    transition: none;
    animation: none;
    transform: none;
  }

  .cartItem:hover {
    transform: none;
  }

  .enhancedNextButton:hover {
    transform: none;
  }
}

/* Print styles */
@media print {
  .cartContainer {
    box-shadow: none;
    border: 1px solid #000;
  }

  .mobileHeader,
  .mobileActions,
  .actionSection {
    display: none;
  }

  .desktopView {
    display: block !important;
  }

  .mobileCompactView {
    display: none !important;
  }

  .cartContent.collapsed {
    max-height: none !important;
    opacity: 1 !important;
  }

  .enhancedSummary {
    background: none;
    border: 1px solid #000;
  }
}
